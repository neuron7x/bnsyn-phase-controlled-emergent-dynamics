name: formal-tla

on:
  schedule:
    # Run nightly at 2 AM UTC
    - cron: '0 2 * * *'
  workflow_dispatch:
    inputs:
      max_steps:
        description: 'Maximum steps for model checking'
        required: false
        default: '100'

permissions:
  contents: read

concurrency:
  group: formal-tla-${{ github.ref }}
  cancel-in-progress: true

jobs:
  tla-model-check:
    uses: ${{ github.repository }}/.github/workflows/_reusable_formal_science.yml@${{ github.sha }}
    with:
      proof-suite: tla
      model-set: specs/tla
      time-budget: 30
      max-steps: ${{ github.event_name == 'workflow_dispatch' && github.event.inputs.max_steps || '100' }}
