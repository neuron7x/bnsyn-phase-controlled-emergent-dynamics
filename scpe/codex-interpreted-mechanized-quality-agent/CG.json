{
  "scpe_release": "v1.0",
  "schema_version": "CG-2026.1",
  "name": "codex-interpreted-mechanized-quality-agent",
  "nodes": [
    { "id": "OBSERVE.INVENTORY", "type": "OBSERVE", "outputs": ["REPORTS/inventory.json", "REPORTS/ci-baseline.json", "REPORTS/quality-baseline.json", "ENV.txt", "COMMANDS.txt"] },
    { "id": "INTERPRET.RUN", "type": "DECIDE", "inputs": ["REPORTS/quality-baseline.json"], "outputs": ["REPORTS/interpretation.json"] },
    { "id": "DECIDE.GATES", "type": "DECIDE", "inputs": ["REPORTS/interpretation.json"], "outputs": ["REPORTS/gate-decisions.json", "REPORTS/scorecard.json"] },
    { "id": "ACT.INSTRUMENT", "type": "ACT", "precondition": "any gate UNKNOWN OR missing quality reports", "rule": "instrument-first within allowlist", "outputs": ["AFTER/instrumentation.patch", "REPORTS/quality/*"] },
    { "id": "ACT.MINIMAL_FIX", "type": "ACT", "precondition": "any gate FAIL", "rule": "minimal diff mapped to deficits", "outputs": ["AFTER/diff.patch"] },
    { "id": "ACT.PR", "type": "ACT", "precondition": "changes ready", "rule": "create/update exactly one PR", "outputs": ["REPORTS/pr.json"] },
    { "id": "PROVE.CI", "type": "PROVE", "precondition": "PR exists", "outputs": ["REPORTS/ci-after.json", "REPORTS/checks.json"] },
    { "id": "PROVE.EBS", "type": "PROVE", "inputs": ["BASELINE/*", "AFTER/*", "REPORTS/*"], "outputs": ["MANIFEST.json"] },
    { "id": "OUTPUT.OH", "type": "PROVE", "inputs": ["REPORTS/gate-decisions.json", "REPORTS/scorecard.json", "REPORTS/pr.json", "REPORTS/ci-after.json", "MANIFEST.json"], "outputs": ["OH-output"] }
  ],
  "edges": [
    { "from": "OBSERVE.INVENTORY", "to": "INTERPRET.RUN" },
    { "from": "INTERPRET.RUN", "to": "DECIDE.GATES" },
    { "from": "DECIDE.GATES", "to": "ACT.INSTRUMENT", "when": "UNKNOWN_or_missing_reports" },
    { "from": "DECIDE.GATES", "to": "ACT.MINIMAL_FIX", "when": "FAIL" },
    { "from": "ACT.INSTRUMENT", "to": "ACT.PR" },
    { "from": "ACT.MINIMAL_FIX", "to": "ACT.PR" },
    { "from": "ACT.PR", "to": "PROVE.CI" },
    { "from": "PROVE.CI", "to": "PROVE.EBS" },
    { "from": "PROVE.EBS", "to": "DECIDE.GATES" },
    { "from": "DECIDE.GATES", "to": "OUTPUT.OH", "when": "no invariant violations" }
  ]
}
